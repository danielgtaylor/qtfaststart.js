<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="qtfaststart.js"></script>
    <script type="text/javascript">
        var output = "";
        
        QtFastStart.onChunkReady = function (file, current, total, data) {
            alert("Got chunk " + current + " of " + total + "! Size: " + data.length);
            output += data;
            if (current == total) {
                alert("Sending file (" + output.length + " bytes)...");
                // We are done, send the file
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/', true);
                xhr.send(output);
            }
        };
        
        function onSubmit() {
            QtFastStart.process(document.getElementById("files").files[0]);
            return false;
        }
    </script>
</head>
<body>
    <form method="POST" enctype="multipart/form-data" action="">
        <input id="files" type="file" name="myfile" />
        <br/>
        <input type="submit" onClick="return onSubmit();"/>
    </form>
</body>
</html>
